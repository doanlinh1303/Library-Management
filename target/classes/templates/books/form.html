<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Book Form</title>
</head>
<body>
    <div th:fragment="content">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
                <li class="breadcrumb-item"><a th:href="@{/books}">Books</a></li>
                <li class="breadcrumb-item active" aria-current="page" th:text="${book.id == null ? 'Add New Book' : 'Edit Book'}">Book Form</li>
            </ol>
        </nav>
        
        <div class="card">
            <div class="card-header">
                <h3 th:text="${book.id == null ? 'Add New Book' : 'Edit Book: ' + book.title}">Book Form</h3>
            </div>
            <div class="card-body">
                <form th:action="@{${book.id == null ? '/books/save' : '/books/update'}}" th:object="${book}" method="post" enctype="multipart/form-data">
                    <input type="hidden" th:field="*{id}" />
                    
                    <div class="row">
                        <div class="col-md-8">
                            <!-- Basic Information -->
                            <div class="mb-3">
                                <label for="title" class="form-label">Title *</label>
                                <input type="text" class="form-control" id="title" th:field="*{title}" required>
                                <div class="text-danger" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="author" class="form-label">Author *</label>
                                <input type="text" class="form-control" id="author" th:field="*{author}" required>
                                <div class="text-danger" th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="isbn" class="form-label">ISBN *</label>
                                        <input type="text" class="form-control" id="isbn" th:field="*{isbn}" required>
                                        <div class="text-danger" th:if="${#fields.hasErrors('isbn')}" th:errors="*{isbn}"></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="category" class="form-label">Category *</label>
                                        <select class="form-select" id="category" th:field="*{category}" required>
                                            <option value="">-- Select Category --</option>
                                            <option th:each="cat : ${categories}" th:value="${cat}" th:text="${cat}"></option>
                                        </select>
                                        <div class="text-danger" th:if="${#fields.hasErrors('category')}" th:errors="*{category}"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="description" class="form-label">Description</label>
                                <textarea class="form-control" id="description" th:field="*{description}" rows="5"></textarea>
                                <div class="text-danger" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <!-- Additional Details -->
                            <div class="mb-3">
                                <label for="coverImage" class="form-label">Cover Image</label>
                                <input type="file" class="form-control" id="coverImage" name="coverImageFile">
                                <div class="form-text">Upload a book cover image (JPG, PNG, max 2MB).</div>
                                
                                <div th:if="${book.coverImageUrl != null}" class="mt-2">
                                    <div class="card">
                                        <img th:src="${book.coverImageUrl}" class="img-thumbnail" alt="Current Cover">
                                        <div class="card-footer">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="removeCover" name="removeCover">
                                                <label class="form-check-label" for="removeCover">
                                                    Remove current cover
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="publicationYear" class="form-label">Publication Year</label>
                                        <input type="number" class="form-control" id="publicationYear" th:field="*{publicationYear}">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="pages" class="form-label">Pages</label>
                                        <input type="number" class="form-control" id="pages" th:field="*{pages}">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="publisher" class="form-label">Publisher</label>
                                <input type="text" class="form-control" id="publisher" th:field="*{publisher}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="language" class="form-label">Language</label>
                                <select class="form-select" id="language" th:field="*{language}">
                                    <option value="">-- Select Language --</option>
                                    <option value="Vietnamese">Vietnamese</option>
                                    <option value="English">English</option>
                                    <option value="French">French</option>
                                    <option value="German">German</option>
                                    <option value="Spanish">Spanish</option>
                                    <option value="Chinese">Chinese</option>
                                    <option value="Japanese">Japanese</option>
                                    <option value="Korean">Korean</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label for="copies" class="form-label">Number of Copies *</label>
                                <input type="number" class="form-control" id="copies" th:field="*{copies}" required min="0">
                                <div class="text-danger" th:if="${#fields.hasErrors('copies')}" th:errors="*{copies}"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between mt-4">
                        <a th:href="@{/books}" class="btn btn-secondary">Cancel</a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save"></i> 
                            <span th:text="${book.id == null ? 'Create Book' : 'Update Book'}">Save</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>

